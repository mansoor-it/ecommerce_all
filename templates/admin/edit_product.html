{% extends "admin/base.html" %}

{% block title %}تعديل المنتج - لوحة تحكم المشرف{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <div class="row">
        <div class="col-12">
            <div class="card shadow-sm">
                <div class="card-header bg-white py-3">
                    <div class="row align-items-center">
                        <div class="col">
                            <h5 class="mb-0">
                                <i class="fas fa-box text-primary me-2"></i>
                                تعديل المنتج
                            </h5>
                        </div>
                        <div class="col-auto">
                            <a href="{{ url_for('admin_products') }}" class="btn btn-secondary">
                                <i class="fas fa-arrow-right me-1"></i>
                                العودة للمنتجات
                            </a>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <form method="POST" enctype="multipart/form-data">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="name" class="form-label">اسم المنتج</label>
                                    <input type="text" class="form-control" id="name" name="name" value="{{ product.name }}" required>
                                </div>
                                <div class="mb-3">
                                    <label for="description" class="form-label">وصف المنتج</label>
                                    <textarea class="form-control" id="description" name="description" rows="3" required>{{ product.description }}</textarea>
                                </div>
                                <div class="mb-3">
                                    <label for="price" class="form-label">السعر</label>
                                    <div class="input-group">
                                        <input type="number" class="form-control" id="price" name="price" value="{{ product.price }}" step="0.01" required>
                                        <span class="input-group-text">ريال</span>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="category" class="form-label">القسم</label>
                                    <select class="form-select" id="category" name="category" required>
                                        <option value="">اختر القسم</option>
                                        {% for category in categories %}
                                        <option value="{{ category.id }}" {% if category.id == product.category %}selected{% endif %}>
                                            {{ category.name }}
                                        </option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="store" class="form-label">المتجر</label>
                                    <select class="form-select" id="store" name="store" required>
                                        <option value="">اختر المتجر</option>
                                        {% for store in stores %}
                                        <option value="{{ store._id }}" {% if store._id == product.store_id %}selected{% endif %}>
                                            {{ store.name }}
                                        </option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="image" class="form-label">صورة المنتج</label>
                                    <input type="file" class="form-control" id="image" name="image" accept="image/*">
                                    {% if product.image %}
                                    <div class="mt-2">
                                        <img src="{{ url_for('static', filename='uploads/' + product.image) }}" 
                                             alt="{{ product.name }}" 
                                             class="img-thumbnail" 
                                             style="max-width: 200px;">
                                    </div>
                                    {% endif %}
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">الألوان المتوفرة</label>
                                    <div class="row g-2">
                                        {% for color in ['أحمر', 'أزرق', 'أخضر', 'أسود', 'أبيض'] %}
                                        <div class="col-auto">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="colors" value="{{ color }}" 
                                                       id="color_{{ color }}" {% if color in product.colors %}checked{% endif %}>
                                                <label class="form-check-label" for="color_{{ color }}">
                                                    {{ color }}
                                                </label>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">الأحجام المتوفرة</label>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h6 class="mb-2">أحجام البنطلون</h6>
                                            <div class="row g-2">
                                                {% for size in ['28', '30', '32', '34', '36', '38', '40', '42', '44', '46'] %}
                                                <div class="col-auto">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" name="pants_sizes" value="{{ size }}" 
                                                               id="pants_{{ size }}" {% if size in product.pants_sizes %}checked{% endif %}>
                                                        <label class="form-check-label" for="pants_{{ size }}">
                                                            {{ size }}
                                                        </label>
                                                    </div>
                                                </div>
                                                {% endfor %}
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <h6 class="mb-2">أحجام الملابس</h6>
                                            <div class="row g-2">
                                                {% for size in ['XS', 'S', 'M', 'L', 'XL', 'XXL', '3XL', '4XL', '5XL'] %}
                                                <div class="col-auto">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" name="clothes_sizes" value="{{ size }}" 
                                                               id="clothes_{{ size }}" {% if size in product.clothes_sizes %}checked{% endif %}>
                                                        <label class="form-check-label" for="clothes_{{ size }}">
                                                            {{ size }}
                                                        </label>
                                                    </div>
                                                </div>
                                                {% endfor %}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="text-end mt-3">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save me-1"></i>
                                حفظ التغييرات
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 